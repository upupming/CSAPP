### 3.2 关键函数设计

#### 3.2.1 int mm_init(void)函数

##### 函数功能

将对于堆来说可用的虚拟内存模型化为一个大的、双字对齐的字节数组。应用程序（例如轨迹驱动的测试程序mdriver）在使用`mm_malloc`、`mm_realloc`或`mm_free`之前，首先要调用该函数进行初始化。例如申请初始堆区域。  

成功返回0，否则返回-1。

##### 处理流程

1. 创建初始堆
2. 给填充字、序言块（脚部、头部）、结尾块赋值
3. 调用`extend_heap`分配1<<12个字节的初始空间

##### 要点分析

1. 创建初始堆

    需要调用`mem_sbrk`，它是在`memlib.h`中声明，在`memlib.c`中实现的，与系统函数`sbrk`相同，用来请求额外的堆内存，不同的是它不支持收缩堆（形参`incr`为负）。  
    申请4字空间。  

2. 首尾的填充

    根据总体设计中的构想，有4个预留的字节，他们有各自的值。

##### 优化

1. `free_lists`数组作为空闲链表，每个大小类初始化为空

