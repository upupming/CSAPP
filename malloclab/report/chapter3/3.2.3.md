#### 3.2.3 void *mm_realloc(void *ptr, size_t size)函数

##### 函数功能

和系统函数`realloc`具有相同的的接口和语义。将ptr指向的内存空间重新分配为size字节，并返回新内存块的地址。

* ptr==NULL  
    等价于  
        mm_malloc(size);

* size==0  
    等价于  
        mm_free(ptr);

* ptr!=NULL && size!=0  
    如果`size`就是原始块大小，直接返回。  
    如果原始块大小为8字节，新块大小为12字节，应该在原始块之后添加4字节未初始化的空间。  
    如果原始块大小为8字节，新块大小为4字节，应该保留原始块前4字节。

返回的地址与原地址可能相同，也可能不同，这依赖于算法的实现、旧块内部碎片大小、参数size的数值。  
新内存块中，前min{旧块字节数，新块字节数}个字节的内容与旧块相同，其他字节未做初始化。
 
##### 参数

void *ptr：指向要修改的内存的指针  
size_t size：重新指定的内存空间大小

##### 处理流程

1. 分配新的大小为`size`的空间
2. 调用`memcpy`完成数据复制
3. 释放原有空间

##### 要点分析

数据复制时需要讨论：  
1. 扩大内存  
    复制原来块的所有信息
2. 减小内存  
    只需复制原来块的前`size`字节

##### 优化

整体思想不变。如果需要额外空间，只需要扩充堆，同时用到了`delete_node`函数；如果需要截断现有的内存块，需要调用`mm_malloc`、`mm_cpy`、`mm_free`才可以。


