### 2.1 进程的概念、创建和回收方法

#### 2.1.1 进程的概念

进程的经典定义就是 **一个执行中的程序的实例** 。系统中每个程序都运行在某个进程的 **上下文** 中。上下文是由程序正确运行所需的状态组成的。这个状态包括存放在内存中的程序的代码和数据，它的栈、通用目的寄存器的内容、程序计数器、环境变量以及打开的文件描述符的集合。  
进程的实现超出了课本的范围，但进程有两个提供给应用程序的关键抽象：  
+ 一个独立的 **逻辑控制流** 。
+ 一个私有的 **地址空间** 。

#### 2.1.2 进程的创建

每次用户通过向shell输入一个可执行目标文件的名字，运行程序时，shell就会创建一个新的进程，然后在这个新进程的上下文中运行这个可执行目标文件。应用程序也能够创建新进程，并且在这个新进程的上下文中运行它们自己的代码或其他应用程序。

`fork`函数可以用来创建新进程，它只被调用一次，却会返回两次：一次是在调用进程（父进程）中，返回子进程的PID；一次是在新创建的子进程中，返回0。  
`fork`创建的子进程与父进程并发运行，具有相同但是独立的地址空间，继承父进程打开的所有文件。

#### 2.1.3 进程的回收方法

进程终止后内核并不会立即把它从系统中清除，此时进程被保持在一种已终止的状态中，直到被它的父进程回收。终止但未被回收的进程称为 **僵死进程** （zombie）。  
如果父进程没有回收它的僵死子进程就终止了，内核会安排`init`进程（PID=1，不会终止）去回收它们。僵死子进程会消耗内存资源，即使父进程没有终止，也应该去回收它们，书上对这部没没有展开了。  
另外`waitpid`函数可用来等待它的子进程终止（Terminated）或停止（stopped）。


